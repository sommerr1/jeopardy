# ПОЛНОЕ ОПИСАНИЕ ПРОГРАММЫ JEOPARDY-LANG

## ОБЩЕЕ ОПИСАНИЕ

**Jeopardy-Lang** - это интерактивная образовательная игра-викторина, построенная на React + TypeScript с поддержкой 3D-рендеринга. Игра представляет собой адаптацию классической игры "Jeopardy!" с дополнительными режимами игры и современным веб-интерфейсом.

## АРХИТЕКТУРА ПРИЛОЖЕНИЯ

### Технологический стек:
- **Frontend**: React 18.2.0 + TypeScript 4.0.0
- **Сборка**: Vite 7.0.4
- **Стилизация**: Tailwind CSS 3.0.0
- **3D-графика**: Three.js 0.162.0 + React Three Fiber 8.15.19 + React Three Drei 9.102.6
- **Анимации**: Framer Motion 11.0.0
- **Тестирование**: Playwright 1.54.1
- **Сервер**: Express 5.1.0 (прокси)

### Структура проекта:
```
src/
├── components/          # React компоненты
├── hooks/              # Пользовательские хуки
├── renderers/          # Система рендереров
├── types/              # TypeScript типы
├── utils/              # Утилиты
├── models/             # 3D модели
├── images/             # Изображения для уровней
├── App.tsx             # Главный компонент
└── main.tsx            # Точка входа
```

## ОСНОВНЫЕ КОМПОНЕНТЫ

### 1. Главный компонент (App.tsx)
- **Функциональность**: Управляет общим состоянием игры, переключением экранов, логикой игры
- **Состояние**: 
  - Игроки и их прогресс
  - Текущий игрок
  - Вопросы и ответы
  - Очки и жизни
  - Тип игры и рендерер
- **Логика**: 
  - Система жизней (HP)
  - Прогрессия уровней
  - Анимации монет
  - Сохранение в cookies

### 2. Система экранов

#### GameTypeSelector
- **Назначение**: Выбор типа игры
- **Режимы**: Classic, Time-Attack, Survival, Team, Automata
- **UI**: Карточки с описанием каждого режима

#### WelcomeScreen
- **Назначение**: Выбор игрока и листа с вопросами
- **Функции**: 
  - Создание новых игроков
  - Выбор существующих игроков
  - Выбор листа из Google Sheets
  - Таблица лидеров

#### GameBoard
- **Назначение**: Игровая доска с вопросами
- **Структура**: Сетка категорий × сложности
- **Визуализация**: Цветовая индикация отвеченных/неправильных вопросов

#### QuestionModal
- **Назначение**: Модальное окно с вопросом
- **Функции**: 
  - Отображение вопроса и вариантов
  - Обработка ответов
  - Показ объяснений
  - Анимации

#### ScoreBoard
- **Назначение**: Отображение статистики игрока
- **Элементы**: 
  - Имя игрока
  - Уровень
  - Очки
  - Жизни (сердечки)
  - Анимация монет

### 3. Система рендереров

#### RendererFactory
- **Назначение**: Фабрика для создания рендереров
- **Паттерн**: Factory Pattern
- **Типы рендереров**: Classic, Minimal, Dark, Automata

#### AutomataRenderer
- **Особенности**: 
  - 3D-модели на фоне
  - Специальный UI для режима автоматов
  - Управление размером 3D-моделей
  - Градиентные фоны

### 4. 3D-система

#### SimpleModelRenderer
- **Технологии**: Three.js + React Three Fiber
- **Компоненты**: 
  - FullScreenModelRenderer (модель на весь экран)
  - BottomModelRenderer (модель снизу)
- **Функции**: 
  - Загрузка GLB-моделей
  - Анимации
  - Управление камерой (OrbitControls)
  - Освещение и сетка

#### ModelTest
- **Назначение**: Тестирование 3D-моделей
- **Функции**: 
  - Отображение модели в отдельном окне
  - Управление камерой
  - Отладочная информация

## СИСТЕМА УПРАВЛЕНИЯ СОСТОЯНИЕМ

### 1. useScore Hook
- **Функции**: 
  - Управление игроками
  - Сохранение прогресса в cookies
  - Логин/логаут
  - Сброс игры
- **Состояние**: 
  - Массив игроков
  - Текущий игрок
  - Уровень, очки, жизни
  - Статистика ответов

### 2. useQuestions Hook
- **Функции**: 
  - Загрузка вопросов из Google Sheets
  - Управление категориями
  - Выбор текущих вопросов
  - Переход к следующим вопросам
- **Логика**: 
  - Случайный выбор 2 категорий
  - Отметка использованных категорий
  - Сброс прогресса

## СИСТЕМА ДАННЫХ

### 1. Источник данных
- **Google Sheets API**: Вопросы загружаются из Google Таблиц
- **URL**: Настроен в `spreadsheetApiUrl.ts`
- **Формат**: JSON с полями category, difficulty, question, correct, options, explanation, rate

### 2. Структура вопроса
```typescript
type Question = {
  category: string;      // Категория
  difficulty: string;    // Сложность (класс)
  question: string;      // Текст вопроса
  correct: string;       // Правильный ответ
  options: string[];     // Варианты ответов
  explanation: string;   // Объяснение
  rate?: number;         // Рейтинг/очки
};
```

### 3. Структура игрока
```typescript
type Player = {
  name: string;                    // Имя игрока
  level: number;                   // Текущий уровень
  score: number;                   // Общий счет
  hp: number;                      // Количество жизней
  consecutiveCorrectLevels: number; // Подряд правильные уровни
  nameOfSheet: string;             // Используемый лист
  gameType?: string;               // Тип игры
  totalCorrectAnswers?: number;    // Всего правильных ответов
  totalQuestionsAsked?: number;    // Всего заданных вопросов
};
```

## ИГРОВАЯ ЛОГИКА

### 1. Система прогрессии
- **Уровни**: Игрок проходит уровни, отвечая на все вопросы в 2 категориях
- **Жизни**: Начальное количество - 5, уменьшается при неправильных ответах
- **Очки**: Начисляются за правильные ответы (rate × 10)
- **Бонусы**: +1 жизнь за 3 подряд правильных уровня

### 2. Система вопросов
- **Выбор**: Случайно выбираются 2 категории из доступных
- **Переход**: После ответа на все вопросы в категориях
- **Ошибки**: При ошибке категории не засчитываются как пройденные
- **Завершение**: Игра заканчивается при HP = 0 или прохождении всех вопросов

### 3. Анимации и эффекты
- **Монеты**: Анимация летящих монет при правильном ответе
- **Сердечки**: Анимация добавления жизней
- **Модальные окна**: Плавные переходы с Framer Motion
- **3D-модели**: Вращение и анимации в режиме автоматов

## КОНФИГУРАЦИЯ И СБОРКА

### 1. Vite конфигурация
- **Плагины**: React, поддержка GLB/GLTF файлов
- **Оптимизация**: Three.js в optimizeDeps
- **Сервер**: Настройка allowedHosts

### 2. TypeScript конфигурация
- **Строгий режим**: Включен
- **JSX**: React JSX
- **Модули**: ESNext
- **Разрешение**: Node

### 3. Tailwind CSS
- **Контент**: Все файлы в src/
- **Плагины**: Базовые утилиты
- **Кастомные классы**: modal-shadow, btn-main, btn-danger, cell-btn

## ТЕСТИРОВАНИЕ

### 1. Playwright
- **Конфигурация**: Множественные конфигурации
- **Тесты**: E2E тестирование игрового процесса
- **Отчеты**: HTML отчеты
- **Браузеры**: Chrome, Firefox, Safari

### 2. Структура тестов
- **E2E тесты**: Полный игровой цикл
- **Тесты рендереров**: Проверка разных рендереров
- **Тесты компонентов**: Изолированное тестирование

## РАЗВЕРТЫВАНИЕ

### 1. Локальная разработка
```bash
npm run dev          # Запуск Vite сервера
npm run proxy        # Запуск прокси сервера
npm run start        # Запуск всех сервисов
```

### 2. Сборка
```bash
npm run build        # Сборка для продакшена
npm run preview      # Предварительный просмотр
```

### 3. Тестирование
```bash
npm run test:e2e     # E2E тесты
npm run test:report  # Просмотр отчетов
```

## ОСОБЕННОСТИ РЕАЛИЗАЦИИ

### 1. Система рендереров
- **Паттерн**: Strategy Pattern для разных стилей отображения
- **Расширяемость**: Легко добавлять новые рендереры
- **Переключение**: Динамическое переключение в runtime

### 2. 3D-интеграция
- **Производительность**: Lazy loading 3D-моделей
- **Управление**: OrbitControls для интерактивности
- **Адаптивность**: Разные размеры для разных контекстов

### 3. Состояние приложения
- **Персистентность**: Сохранение в cookies
- **Модульность**: Разделение на хуки
- **Типизация**: Полная типизация TypeScript

### 4. Пользовательский опыт
- **Анимации**: Плавные переходы и эффекты
- **Обратная связь**: Визуальные индикаторы правильности
- **Адаптивность**: Responsive дизайн

## ВОЗМОЖНЫЕ УЛУЧШЕНИЯ

### 1. Функциональные
- Добавление звуковых эффектов
- Система достижений
- Мультиплеер режим
- Статистика и аналитика

### 2. Технические
- Оптимизация 3D-рендеринга
- Кэширование вопросов
- PWA функциональность
- Офлайн режим

### 3. UX/UI
- Темная тема
- Настройки пользователя
- Улучшенные анимации
- Мобильная оптимизация

## ЗАКЛЮЧЕНИЕ

Jeopardy-Lang представляет собой современное веб-приложение, демонстрирующее использование передовых технологий для создания интерактивной образовательной игры. Архитектура приложения обеспечивает расширяемость, производительность и отличный пользовательский опыт.

Ключевые особенности:
- Модульная архитектура с четким разделением ответственности
- Система рендереров для гибкого отображения
- 3D-интеграция для визуального воздействия
- Полная типизация TypeScript
- Комплексное тестирование
- Современные инструменты разработки

Приложение готово к использованию в образовательных целях и может служить основой для создания более сложных игровых систем.
